<!DOCTYPE html>
<html lang="ko">
    <head>
        <title>dailyDetailInfor</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="../style/dailyDetailInforStyle.css" />
        <script>
            window.onload = () => {
                // location.search를 이용하여 queryString id 들고오기
                const queryString = location.search;
                const queryId = new URLSearchParams(queryString).get("id");

                const dailyArray = JSON.parse(
                    localStorage.getItem("dailyArray")
                ).filter((daily) => Number(daily.id) === Number(queryId));

                const mainElement = document.getElementsByTagName("main")[0];
                const articleElement = document.createElement("article");
                articleElement.innerHTML = `<div class="article-header">${dailyArray[0].title}</div>
                <div class="article-mood-container">
                    <div class="article-mood">
                        <img src="../${dailyArray[0].img}" alt="1" class="post-img" />
                        <div class="post-font-${dailyArray[0].moodEng}">${dailyArray[0].mood}</div>
                    </div>
                    <div class="post-font">${dailyArray[0].date} 작성</div>
                </div>
                <div>
                ${dailyArray[0].content}
                </div>
                <div class="post-update">
                    <a href="./dailyUpdate.html?id=${dailyArray[0].id}" class="update-button">수정</a>
                    <a class="update-button" onclick="onClickDeletePost()">삭제</a>
                </div>
                `;
                mainElement.appendChild(articleElement);

                const sectionElement = document.getElementById("section-list");

                dailyArray[0].comments.map((comment) => {
                    const divElement = document.createElement("div");
                    divElement.innerHTML = `
            <div class="section-comment">
                <div>${comment}</div>
                <div class="section-date">[2024.09.24]</div>
            </div>`;
                    sectionElement.appendChild(divElement);
                });
            };
        </script>
    </head>
    <body>
        <main>
            <header>
                <div class="header-text-container">
                    <div class="header-text">민지의 다이어리</div>
                </div>
                <div class="header-mobile">
                    <svg
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                        onclick="onBack()"
                    >
                        <path
                            d="M9.725 11.9996L17.075 19.3496C17.325 19.5996 17.4458 19.8913 17.4375 20.2246C17.4292 20.558 17.3 20.8496 17.05 21.0996C16.8 21.3496 16.5083 21.4746 16.175 21.4746C15.8417 21.4746 15.55 21.3496 15.3 21.0996L7.6 13.4246C7.4 13.2246 7.25 12.9996 7.15 12.7496C7.05 12.4996 7 12.2496 7 11.9996C7 11.7496 7.05 11.4996 7.15 11.2496C7.25 10.9996 7.4 10.7746 7.6 10.5746L15.3 2.87462C15.55 2.62462 15.8458 2.50379 16.1875 2.51212C16.5292 2.52046 16.825 2.64962 17.075 2.89962C17.325 3.14962 17.45 3.44129 17.45 3.77462C17.45 4.10796 17.325 4.39962 17.075 4.64962L9.725 11.9996Z"
                            fill="#333333"
                        />
                    </svg>

                    <div class="mobile-text">일기 상세</div>
                </div>
            </header>
        </main>
        <section>
            <div class="section-title">회고</div>
            <form class="section-input" onsubmit="onSubmitComment(event)">
                <input
                    type="text"
                    placeholder="회고를 남겨보세요"
                    class="section-input1"
                />
                <button class="section-button">입력</button>
            </form>
            <div class="section-list" id="section-list"></div>
        </section>
    </body>
    <script src="./utils/onSubmitComment.js"></script>
    <script src="./utils/onClickDeletePost.js"></script>
    <script src="./utils/onBack.js"></script>
</html>
